{% extends "base.html" %}
{% block content %}
<h1>Search Bookings</h1>
<form method="get" action="/bookings/search">
    <label>Event:
        <select name="event">
            <option value="">All</option>
            {% for event in events %}
            <option value="{{ event.name }}" {% if event.name == selected_event %}selected{% endif %}>{{ event.name }}</option>
            {% endfor %}
        </select>
    </label>
    <label>Venue:
        <select name="venue">
            <option value="">All</option>
            {% for venue in venues %}
            <option value="{{ venue.name }}" {% if venue.name == selected_venue %}selected{% endif %}>{{ venue.name }}</option>
            {% endfor %}
        </select>
    </label>
    <label>Ticket Type:
        <select name="ticket_type">
            <option value="">All</option>
            {% for t in ticket_types %}
            <option value="{{ t.name }}" {% if t.name == selected_ticket_type %}selected{% endif %}>{{ t.name }}</option>
            {% endfor %}
        </select>
    </label>
    <button type="submit">Search</button>
</form>
<hr>
<table>
    <thead>
        <tr>
            <th>ID</th><th>Event</th><th>Venue</th><th>Ticket Type</th><th>Quantity</th><th>Status</th><th>Confirmation</th><th>Created</th>
        </tr>
    </thead>
    <tbody>
        {% for b in bookings %}
        <tr>
            <td>{{ b.id }}</td>
            <td>{{ b.event_name }}</td>
            <td>{{ b.venue_name }}</td>
            <td>{{ b.ticket_type_name }}</td>
            <td>{{ b.quantity }}</td>
            <td>{{ b.status }}</td>
            <td>{{ b.confirmation_code }}</td>
            <td>{{ b.created_at }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %} 